setNames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
head(data)
sum(is.na(data)) # 0
length(unique(data$Date)) # 332
table(data$Date)
years <- sort(unique(data$Date))
#' @param dt data table
#' @param minYear
#' @param maxYear
#' @return data table
#'
groupByDate <- function(dt, minYear, maxYear) {
result <- dt %>% filter(Year >= minYear, Year <= maxYear)
return(result)
}
#' Select the year interval and rig type
#' @param dt data table
#' @param minYear
#' @param maxYear
#' @return data table
#'
groupByDateAndRigType <- function(dt, minYear, maxYear, rigtypes) {
result <- dt %>% filter(Year >= minYear, Year <= maxYear, variable %in% rigtypes)
return(result)
}
#' Plot number of rigs by year interval
#'
#' @param dt data table
#' @param dom
#' @param xAxisLabel year
#' @param yAxisLabel number of rigs
#' @return RigsByYear plot
plotRigCountByYear <- function(dt, dom = "RigsByYear",
xAxisLabel = "Date",
yAxisLabel = "Number of Rigs") {
RigsByYear <- nPlot(
TotalNumberofRigs ~ Date,
data = dt,
#stackedAreaChart
#lineChart
type = "scatterChart",
dom = dom, width = 650
)
RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green'))
RigsByYear$chart(tooltipContent = "#! function(key, x, y, e){
return '<h5><b>Total Rigs</b>: '
+ e.point.TotalNumberofRigs + '<br>'
+ '</h5>'
} !#")
RigsByYear$yAxis(axisLabel = yAxisLabel, width = 80)
RigsByYear$xAxis(axisLabel = xAxisLabel, width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
}
#' Plot number of rigs by year interval
#'
#' @param dt data table
#' @param dom
#' @param xAxisLabel year
#' @param yAxisLabel number of rigs
#' @return RigsByYear plot
plotRigCountByYearAndRigType <- function(dt, dom = "RigsByYearAndRigType",
xAxisLabel = "Date",
yAxisLabel = "Number of Rigs") {
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = dt,
#stackedAreaChart
#lineChart
type = "lineChart",
dom = dom, width = 650
)
RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$chart(tooltipContent = "#! function(key, x, y, e){
return '<h5><b>Total Rigs</b>: '
+ e.point.value + '<br>'
+ '</h5>'
} !#")
RigsByYear$yAxis(axisLabel = yAxisLabel, width = 80)
RigsByYear$xAxis(axisLabel = xAxisLabel, width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
}
source('~/Documents/GitHub/Developing-Data-Products/Helper-Functions.R', echo=TRUE)
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
source('~/Documents/GitHub/Developing-Data-Products/Helper-Functions.R', encoding = 'UTF-8')
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
--- .class #id
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setnames(data, "Total.Rigs", "TotalNumberofRigs")
install.packages(c("backports", "bindrcpp", "DBI", "glue", "jsonlite", "R6", "Rcpp", "rmarkdown"))
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setnames(data, "Total.Rigs", "TotalNumberofRigs")
library(data.table)
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(data.table)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setnames(data, "Total.Rigs", "TotalNumberofRigs")
setnames(data, "Crude.Oil", "CrudeOil")
setnames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setnames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
head(flatdata)
library(knitr)
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = flatdata,
#stackedAreaChart
#lineChart
type = "lineChart",
width = 900,
hight = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$yAxis(axisLabel = "Rig Count per Category", width = 80)
RigsByYear$xAxis(axisLabel = "Date", width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
library(knitr)
RigsByYear <- nPlot(
TotalNumberofRigs ~ Date,
data = data,
#stackedAreaChart
#lineChart
type = "scatterChart",
width = 900,
height = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green'))
RigsByYear$yAxis(axisLabel = "Total Rig Count", width = 100)
RigsByYear$xAxis(axisLabel = "Date", width = 100)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(data.table)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setnames(data, "Total.Rigs", "TotalNumberofRigs")
head(flatdata)
library(knitr)
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = flatdata,
#stackedAreaChart
#lineChart
type = "lineChart",
width = 900,
hight = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$yAxis(axisLabel = "Rig Count per Category", width = 80)
RigsByYear$xAxis(axisLabel = "Date", width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
library(knitr)
RigsByYear <- nPlot(
TotalNumberofRigs ~ Date,
data = data,
#stackedAreaChart
#lineChart
type = "scatterChart",
width = 900,
height = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green'))
RigsByYear$yAxis(axisLabel = "Total Rig Count", width = 100)
RigsByYear$xAxis(axisLabel = "Date", width = 100)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(data.table)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
# Explorations and data checks
head(data)
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(data.table)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
# Explorations and data checks
head(data)
head(flatdata)
library(knitr)
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = flatdata,
#stackedAreaChart
#lineChart
type = "lineChart",
width = 900,
hight = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$yAxis(axisLabel = "Rig Count per Category", width = 80)
RigsByYear$xAxis(axisLabel = "Date", width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
library(knitr)
RigsByYear <- nPlot(
TotalNumberofRigs ~ Date,
data = data,
#stackedAreaChart
#lineChart
type = "scatterChart",
width = 900,
height = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green'))
RigsByYear$yAxis(axisLabel = "Total Rig Count", width = 100)
RigsByYear$xAxis(axisLabel = "Date", width = 100)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
shiny::runApp()
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
library(data.table)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
setNames(data, "Crude.Oil", "CrudeOil")
setNames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setNames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
# Chunk 1
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
library(data.table)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
setNames(data, "Crude.Oil", "CrudeOil")
setNames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setNames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
# Chunk 2
library(knitr)
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = flatdata,
#stackedAreaChart
#lineChart
type = "lineChart",
width = 900,
hight = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$yAxis(axisLabel = "Rig Count per Category", width = 80)
RigsByYear$xAxis(axisLabel = "Date", width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
# Chunk 1
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
library(data.table)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
setNames(data, "Crude.Oil", "CrudeOil")
setNames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setNames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
# Chunk 2
library(knitr)
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = flatdata,
#stackedAreaChart
#lineChart
type = "lineChart",
width = 900,
hight = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$yAxis(axisLabel = "Rig Count per Category", width = 80)
RigsByYear$xAxis(axisLabel = "Date", width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
# Chunk 3
library(knitr)
RigsByYear <- nPlot(
TotalNumberofRigs ~ Date,
data = data,
#stackedAreaChart
#lineChart
type = "scatterChart",
width = 900,
height = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green'))
RigsByYear$yAxis(axisLabel = "Total Rig Count", width = 100)
RigsByYear$xAxis(axisLabel = "Date", width = 100)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
require(xlsx)
library(data.table)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
setNames(data, "Crude.Oil", "CrudeOil")
setNames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setNames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
require(xlsx)
library(data.table)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
ddata <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setnames(data, "Total.Rigs", "TotalNumberofRigs")
setnames(data, "Crude.Oil", "CrudeOil")
setnames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setnames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
data <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setNames(data, "Total.Rigs", "TotalNumberofRigs")
knitr::opts_chunk$set(echo = TRUE)
require(xlsx)
require(base64enc)
library(data.table)
library(dplyr)
library(DT)
library(rCharts)
library(reshape)
library(knitr)
# Read data
data <- read.xlsx("./Data/USRigCount.xlsx", sheetName = "Aggregated", header=TRUE)
setnames(data, "Total.Rigs", "TotalNumberofRigs")
setnames(data, "Crude.Oil", "CrudeOil")
setnames(data, "Natural.Gas", "NaturalGas")
data$Year<-as.POSIXlt(data$Date)$year+1900
setnames(data, "Year", "Year")
flatdata<-melt(data[,c("Date","Year","Onshore","Offshore","CrudeOil","NaturalGas")], id=c("Date","Year"))
# Explorations and data checks
head(data)
head(flatdata)
library(knitr)
RigsByYear <- nPlot(
value ~ Date,
group = 'variable',
data = flatdata,
#stackedAreaChart
#lineChart
type = "lineChart",
width = 900,
hight = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green', 'red'))
RigsByYear$yAxis(axisLabel = "Rig Count per Category", width = 80)
RigsByYear$xAxis(axisLabel = "Date", width = 70)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
library(knitr)
RigsByYear <- nPlot(
TotalNumberofRigs ~ Date,
data = data,
#stackedAreaChart
#lineChart
type = "scatterChart",
width = 900,
height = 400
)
#RigsByYear$chart(margin = list(left = 100, top = 100))
RigsByYear$chart(color = c('purple', 'blue', 'green'))
RigsByYear$yAxis(axisLabel = "Total Rig Count", width = 100)
RigsByYear$xAxis(axisLabel = "Date", width = 100)
RigsByYear$xAxis(tickFormat ="#! function(d) {return d3.time.format('%Y/%m')(new Date(d*1000*3600*24));} !#")
RigsByYear
